<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: PubSub.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: PubSub.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>define(function () {
	var cache = {},
		/**
		 * Publish Subscribe Module
		 * @exports utils/PubSub
		 */
		pubsub = {};

	/**
	 * Publish method
	 * @param {string} eventName - Event to publish
	 * @param {object} eventArgs - Object passed the the callback
	 * @returns {boolean} - Was a Listener Found?
	 */
	pubsub.publish = function publish (eventName, eventArgs) {
		// check if the event exists
		if (!cache[eventName]) {
			// event not found so return false
			return false;
		}

		// for each callback for this event
		cache[eventName].forEach(function callbacks (item, idx) {
			// call the CB with either the passed object or an empty object
			item.call(null, eventArgs || []);
		});

		// Event was found, so return true
		return true;
	};

	/**
	 * Subscribe Method
	 * @param {string} eventName - Event to subscribe too
	 * @param {function} callbackFunction - Function to be called on publish
	 */
	pubsub.subscribe = function subscribe (eventName, callbackFunction) {

		// if there is not already a cache
		if (!cache[eventName]) {
			// create a new array to hold all the subscribers
			cache[eventName] = [];
		}

		// check the the callback was passed and is a function
		if (!callbackFunction || typeof callbackFunction !== 'function') {
			// throw an error
			throw new Error('Event could not subscribe to event, callback was undefined or not a function');
		}

		// push this callback into the array of subscribers
		cache[eventName].push(callbackFunction);
	};

	/**
	 * Unsubscribe Method
	 * @param {string} eventName - Event to stop listening to
	 * @param {function} [callbackFunction] - The callback function. If not specified, all listerns for the
	 * event are removed
	 * @returns {boolean} - Was a listener for the event found
	 */
	pubsub.unsubscribe = function unsubscribe (eventName, callbackFunction) {
		var cbLen = 0;

		// If the event isn't in the cache
		if (!cache[eventName]) {
			return false;
		}

		// If a callback was not passed, assume remove all of them
		if (!callbackFunction) {
			delete cache[eventName];
		} else {

			// Get the length of the call backs associated with the event
			cbLen = cache[eventName].length;

			// Loop through the to find the one that matches the passed callback
			while (cbLen--) {

				if (cache[eventName][cbLen] === callbackFunction) {

					// If you find it, remove it from the list
					cache[eventName].splice(cbLen, 1);
				}
			}

		}

		return true;
	};

	// Return the public methods
	return pubsub;
});

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-utils_PolyFills.html">utils/PolyFills</a></li><li><a href="module-utils_PubSub.html">utils/PubSub</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-utils_PolyFills.obj.html">obj</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.3</a> on Wed Oct 07 2015 21:25:32 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
